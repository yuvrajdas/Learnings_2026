<script>

    // console.log(x)
    // console.log(hello)

    // var x = 10;

    // function hello(){
    //     console.log('hello fun')
    // }


    // a function having access to the lexical scope of its parent even if it returns
    function parentFun() {
        let parentScopeVar = 10;

        return function childFun() {
            console.log(parentScopeVar);
        }
    }
    let cf = parentFun();

    // console.log(cf())

    // ------------------------------------------------ forEach ---------------------
    let students = [
        { name: "Pravin", class: 12, subject: "maths" },
        { name: "Vinay", class: 6, subject: "maths" },
        { name: "Yonitha", class: 3, subject: "Bio" },
        { name: "Meera", class: 7, subject: "Arts" }
    ]

    // let res = students.forEach((ele)=>{
    //     if(ele.name == 'Meera'){
    //         ele.name = "Hello"
    //     }
    // })

    // let res = students.map((ele)=>{
    //     if(ele.name === 'Meera'){
    //        return {
    //          ...ele,
    //          name:'DAS'
    //        }
    //     }
    //     return ele
    // })

    // ----------------------------------------- filter --------------------------
    // let res = students.filter((ele)=>{
    //     if(ele.class>=7){
    //         return ele;
    //     }
    // })

    let persons = [
        { fname: "Pravin", lname: 'Kumar', class: 12, subject: "maths" },
        { fname: "Vinay", lname: 'Dhruv', class: 6, subject: "maths" },
        { fname: "Yonitha", lname: 'Sahu', class: 3, subject: "Bio" },
        { fname: "Meera", lname: 'Patel', class: 6, subject: "Arts" }
    ]

    let filterMapCombinationRes = persons.filter((ele)=>ele.class >=6).map((ele)=>ele.fname)
    // console.log(filterMapCombinationRes)

    let students1 = [
        { name: "A", subject: "Math" },
        { name: "B", subject: "Bio" },
        { name: "C", subject: "Math" },
        { name: "D", subject: "Arts" },
        { name: "E", subject: "Bio" }
    ];


    let arr = [1, 2, 3, 2, 4, 1, 2, 3];

    // -------------------------------------------- reduce -------------------------------
    let res = students1.reduce((acc, curr) => {
        if (acc[curr.subject]) {
            acc[curr.subject]++;
        } else {
            acc[curr.subject] = 1;
        }
        return acc;
    }, {})



    // console.log(res);

    let fmr = arr.reduce((acc, curr) => {
        if (acc[curr]) {
            acc[curr]++;
        } else {
            acc[curr] = 1;
        }
        return acc;
    }, {})

    // console.log(fmr)
    // let res = persons.map(p=>p.fname+" "+p.lname)
    // console.log(res)

    // let res = persons.reduce((acc, ele)=>{
    //     if(!acc[ele.class]){
    //         acc[ele.class] = 1;
    //     }else{
    //         acc[ele.class]++
    //     }
    //     return acc;
    // },{})

    // console.log(res)


    // Call Apply Bind -----------------------------------

    function testCallFn(props, my){
        console.log(props, my)
    }

    function testApplyFn(...p1){
        console.log(p1)
    }

    function testBindFn(...bindProp){
        console.log(bindProp)
    }

    
    let obj = {
        fname:'Yuvraj',
        lname:'Das'
    }

    // testCallFn();
    // testCallFn.call(obj, [1,2,3,4,5], "yuvraj")
    // testApplyFn.apply(obj, ["Yuvraj", "Das"])
       let bfCopy =  testBindFn.bind(obj, ["Asdf", "ASdf"])
        // console.log(bfCopy())

    // bind : bind method used to call a function with specified this value with individual argument it do not call the function imidialy, it create a copy of that function that can be called later when needed



    // -------------------------------------------- Promise ------------------------------------------------------
    // Promise is an object, used to perform Asyncronous operation, it has three state pending, resolve and reject

    let promsie1 = new Promise((resolve, reject)=>{
        setTimeout(()=>{
            resolve("promise 1 completed in 2 sec")

            // reject("error")
        },2000)
    })
    
    
    let promsie2 = new Promise((resolve, reject)=>{
        setTimeout(()=>{
            resolve("promise 1 completed in 2 sec")
            // reject("error")

        },5000)
    })


    let promsie3 = new Promise((resolve, reject)=>{
        setTimeout(()=>{
            resolve("promise 1 completed in 7 sec")
            // reject("error")
        },7000)
    })

    // ------------------------------- Promise.all()
    // Promise.all([promsie1, promsie2, promsie3]).then((res)=>{
    //     console.log("resolved ", res)
    // }).catch((err)=>{
    //     console.log(err)
    // })

    // Promise.allSettled([promsie1, promsie2, promsie3]).then((res)=>{
    //     console.log(res)
    // }).catch((err)=>{   
    //     console.log(err)
    // })

    // Promise.race([promsie1, promsie2, promsie3]).then((res)=>{
    //     console.log(res)
    // }).catch((err)=>{
    //     console.log(err)
    // })

    //    Promise.any([promsie1, promsie2, promsie3]).then((res)=>{
    //     console.log("succ",res)
    //    }).catch((err)=>{
    //     console.log("err", err)
    //    })
    
    // --------------------------- Rest paprameter --------------------------------------
    // when we want to pass dynamic number of paramter to a function and that function should able recieve these dynamica arguments that time we use rest paramters 

    function sum(...arg){
        console.log(arg)
    }

    // sum(1,2)

    // --------------------------- Spread Operator ---------------------------- 
    // used to quickly copy the values (object, array) all values/ partial 
    let arr1 = [1,2,3,4,5];
   let arr2 = [6,7,8];

   arr2 = [ ,...arr1]
//    console.log(arr2)


    //----------------------------------------- Destructure ------------------------------------
    let arrV = ["hello", "good afternoon", ["nestedVal"],3, 6, 9, ]
    
    let [gree, msg, [nv]] = arrV;
    // console.log(gree, msg, nv)

    let objV = { name:"Your name", address :{city:"raigarh", state:"chattisgarh"}}
 
    let {name, address:{city}} = objV
    // console.log(name, city)

    // ------------------------------ shalow/deep copy ------------------------------------
    // shalow copy : copy only single level property of the object
    // deep copy : copy all level objects property
    let o = {
        name: "Yuvraj",
        address:{
            city:"Raigarh"
        },
        displayDetails:()=>{
            console.log(name)
        }

    }
    // reson : here the memory reference is copied so person and update happned in o object memory location thats why getting "Das" in o object's name property


    // to resolve the copy by reference 
    // let person = Object.assign({}, o); // work for single level copy
    // let person = {...o} // work for single level copy
       let person = JSON.parse(JSON.stringify(o))
    person.address.city = "Hyderabad";
    // console.log(person);
    // console.log("o :",o)

    // here copy by values.
    let x = 10;
    let y =x;
    y = 12
    // console.log(x)
    // --------------------------------- Prototyping -----------------------

    // prototyp is buildin object in javascript whenever we create object javascript attach this object into it.


    let protoObj = {name:"Yuvraj"}
    // console.log(protoObj)

    function Students(name, className, school){
        this.sname = name;
        this.class = className;
    }

    Students.prototype.college = "ccs";
    
    const ravi = new Students("Ravi", "12th");
    const raju = new Students("Raju", "11th")

    // console.log(raju)
    // console.log(ravi)


    // ---------------------------- this keyword ------------------------------
    class Developer{
        constructor(){
            console.log(this)
        }
    }
    // const dev = new Developer();

    // const devf = ()=>{
    //     console.log(this)
    // }
    // devf();


    // function normalFun(){
    //     console.log(this);
    // }

    // normalFun();
    
    // -------------------- polifill--------------------------------------------

    let array = [1,2,3,4,5];
    
    array.forEach((ele, idx, arr)=>{
        // console.log(ele, idx, arr);
    })

     Array.prototype.myForEach = function(cb){
        for(let i = 0; i<this.length; i++){
            cb(this[i], i, this);
        }
     }

    array.myForEach((ele, idx, arr)=>{
        // console.log(ele, idx, arr);
     })
 
    
    Array.prototype.myMap = function(cb){
        if(typeof cb !== 'function'){
            throw new Error('callback is not a function');
        }

        let res = [];
        for(let i = 0; i<this.length; i++){
            res.push(cb(this[i], i, this));
        }
        return res;
    }

    let re = array.myMap((ele,i, arr)=>{
        // console.log(ele, i, arr)
        return ele
    })
    
    let r = array.filter((ele, idx, arr)=>{
        // console.log(ele, idx, arr)
        if(ele>3){
            return ele;
        }
    })
    // console.log(r, "\n");
    Array.prototype.myFilter = function(cb){
        if(typeof cb !== 'function'){
            throw new Error(cb, 'is not a function');
        }

        let res = [];

        for(let i = 0; i<this.length; i++){
            if(cb(this[i], i, this)){
                res.push(this[i])
            }
        }

        return res;
    }

    let rs = array.myFilter((ele, i, arr)=>{
        // console.log(ele, i, arr)
        if(ele>3){
            return ele;
        }
    })
    // console.log(rs);


    Array.prototype.myReduce = function(cb, intialValue){
        if(typeof cb !== 'function'){
            throw new Error(cb, "is not a function");
        }

       let acc;
       let startIdx;

        if(intialValue !== undefined){
            acc = intialValue;
            startIdx = 0;
        }else{
            acc = this[0]
            startIdx = 1;
        }

        for(let i = startIdx; i<this.length; i++){
            acc = cb(acc, this[i], i, this)
        }

       return acc;
    }

    array.myReduce((acc, curr, idx, arr)=>{
        console.log(acc, curr, idx, arr)
    },0)
    
    // array.reduce((acc, curr, idx, arr)=>{
    //     console.log(acc, curr, idx, arr)
    // },0)

//    ------------------------------- string methods ------------------------------------------

let str =""
</script>